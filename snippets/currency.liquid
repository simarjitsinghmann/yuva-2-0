<div class="currency-block">
    {% form 'localization' %}
    <div class="disclosure btn-group currency-dropdown">
      <label class="disclosure__button dropdown-toggle dropdown-label" aria-expanded="false" aria-controls="CountryList">
        {{ localization.country.currency.iso_code }}
      </label>

      <ul id="CountryList" role="list" class="disclosure__list dropdown-menu currency-menu" hidden>
        {% for country in localization.available_countries %}
        <li class="disclosure__item" tabindex="-1">
          <a class="dropdown-item"  tabindex="-1" aria-label="{{ country.currency.iso_code }}" href="#"{% if country.iso_code == localization.country.iso_code %} aria-current="true"{% endif %} data-value="{{ country.iso_code }}">
            {{ country.currency.iso_code }}
          </a>
        </li>
        {% endfor %}
      </ul>

      <input type="hidden" name="country_code" value="{{ localization.country.iso_code }}">
    </div>
    {% endform %}
</div>

<script>
  var currencyList =  document.getElementById('CountryList');
  if(currencyList){
    currencyList.addEventListener('change', ()=>{	
                                  var form = currencyList.closest('form');
    form.submit()
  })
  }
</script>