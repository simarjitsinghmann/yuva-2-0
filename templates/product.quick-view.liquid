{% layout none %}

{%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
<div class="quickview_product_wrapper product_content_section">
  <div class="quickview_product_slider">   
    <div id="feature__product-{{product.id}}" class="quickview_product">
      {%- for media in product.media -%}
      <div class="item" >
        {%-case media.media_type-%}
          {%- when 'image'-%}
        <div class="quickview_product_img">
          <img src="{{media | img_url: 'master'}}" alt="{{ media.preview_image.alt | escape }}">
        </div>
          {%- when 'external_video'-%} 
        <div class="quickview_product_img">
          {{media | external_video_url: autoplay: false, loop: loop | external_video_tag: class: video_class, loading: "lazy"}}
        </div>
          {%- when 'video'-%}
        <div class="quickview_product_img">
          {{ media |media_tag: image_size: "2048x", autoplay: false, loop: loop, controls: true, preload: "none", autoplay: false }}
        </div>
          {%- when 'model'-%}
        <div class="quickview_product_img">
          {{media |  media_tag: image_size: "2048x", toggleable: true}}
        </div>
          {%-endcase-%}
      </div>
      {%-endfor-%}
    </div> 
    <div id="feature__productThumbs-{{product.id}}" class="quickview_product thumb d-none d-md-block d-lg-block">
      {%- for media in product.media -%}
      <div class="item" data-id="media-{{media.id}}">
        {%-case media.media_type-%}
          {%- when 'image'-%}
        <div class="quickview_product_img_thumb">
          <img src="{{media | img_url: '150x'}}" alt="{{ media.preview_image.alt | escape }}">
        </div>
          {%- when 'external_video'-%} 
        <div class="quickview_product_img_thumb">
          {{media | external_video_url: autoplay: false, loop: loop | external_video_tag: class: video_class, loading: "lazy"}}
        </div>
          {%- when 'video'-%}
        <div class="quickview_product_img_thumb">
          {{ media |media_tag: image_size: "2048x", autoplay: false, loop: loop, controls: true, preload: "none", autoplay: false }}
        </div>
          {%- when 'model'-%}
        <div class="quickview_product_img_thumb">
          {{media |  media_tag: image_size: "2048x", toggleable: true}}
        </div>
          {%-endcase -%}
        </div>
      {%-endfor-%}
    </div> 
  </div>
  <div class="quickview_product_detail">
    <div class="product-add-to-cart-right">
      <a class="product-detail-title" href="{{product.url}}">{{ product.title | default: 'Example Product Title' }}</a>
      <p class="vendor_name">{{product.vendor}}</p>
      <div class="ratingbox">
        <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
      </div>
      {% form 'product', product, data-product-form: '', data-product-handle: product.handle, data-enable-history-state: 'true' %} 
      <input type="hidden" name="form_type" value="product">


      <div class="prizebox" data-saved="{{settings.show_saved_amount}}"  data-saved-style="{{settings.saved_amount_style}}" data-price-wrapper>
        {% if current_variant.compare_at_price > current_variant.price %}
        <h3 id="get_price">
          <span data-regular-price>{{current_variant.price | money }}</span>
          <span class="main-price">
            {{current_variant.compare_at_price | money }}
          </span>
        {% if settings.show_saved_amount %}        
        {% if settings.saved_amount_style == 'percentage' %}
        <span class="percent-off">{{ current_variant.compare_at_price | minus: current_variant.price | times: 100.0 | divided_by: product.compare_at_price | round:2 | append: "% OFF"}}</span>
        {% else %}
        <span class="percent-off">{{ current_variant.compare_at_price | minus: current_variant.price | money | append: " OFF"}}</span>
        {% endif %}
        {% endif %}
        </h3>
        {% else %}
        <h3 id="get_price">{{current_variant.price | money }}</h3>
        {% endif %}
        {% if current_variant.unit_price_measurement %}
        <p class="unit-price">
          {{ current_variant.unit_price | money }} /
          {% if current_variant.unit_price_measurement.reference_value != 1 %}
          {{ current_variant.unit_price_measurement.reference_value }}
          {% endif %}
          {{ current_variant.unit_price_measurement.reference_unit }}
        </p>
        {% endif %}
      </div>
      <div class="form-group">
        {% if product.available and product.variants.size > 1 %}
        {% for option in product.options_with_values %}
        {% assign downOption = option.name | downcase %}
        {% assign optionIndex = forloop.index %}
        {% assign varOptionIndex = 'option'|append:forloop.index %}
        <div class="select__{{downOption}} product-option-selector">
          <p class="variant_title">{{ 'products.product.option' | t: title:option.name }}</p>
          
          {% if settings.option_style == 'swatch' %}
          <ul class="product-loop-variants {{downOption}} variants {{settings.color_swatch_style}} _small list-unstyled">                            
            {%- for value in option.values -%}  
            <li class="{{downOption}}_option variant_option">
              <input class="productOption" type="radio" name="option-{{optionIndex}}" title="{{value}}" value="{{value}}" {% if option.selected_value == value %}checked{% endif %}>
              {% assign variantImage = '' %}
              {% if settings.variant_image %}                                                                                  
              {% assign variantsList = product.variants | where: varOptionIndex, value %}                                             
              {% for variant in variantsList %}
              {% if variant.featured_image != blank %}
              {% assign variantImage = variant.featured_image %}
              {% break %}
              {% endif %}
              {% endfor %}
              {% endif %}

              {% if downOption == 'color' or  downOption == 'colour'%}    
              <span 
                    class="option {% if option.selected_value == value %}selected{% endif %} {% unless settings.variant_image %}variantColorOption {% else %}variantImageOption {% endunless %}" 
                    {% if downOption == 'color' or  downOption == 'colour'%}{% unless settings.variant_image and variantImage != blank %} 
                    style="background-color:{{value}};"{% endunless %}{% endif %}
                    >
                {% if settings.variant_image %}    
                {% if variantImage != blank %}
                <img src="{{variantImage | img_url:"grande"}}">
                {% endif %}
                {% endif %}
              </span>
              {% else %}
              <span class="option {% if option.selected_value == value %}selected{% endif %}" >
                {{value}}
              </span>
              {% endif%}
            </li>
            {% endfor %}
          </ul> 
          {% elsif settings.option_style == 'dropdown' %}
          
          {% comment %}
          <div class="dropdown {{downOption}}-select productOptionSelect">
            <button id="dLabel" class="dropdown-selected" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              {{option.selected_value}}
            </button>
            <span class="caret"></span>
            <ul class="product-loop-variants dropdown-menu {{downOption}}-menu productOptionSelectList" aria-labelledby="dLabel" style="display: none;">
              {%- for value in option.values -%}
              <li class="productOption">
                <input type="radio" name="option-{{optionIndex}}" value="{{value}}" {% if option.selected_value == value %}checked{% endif %}>
                {{value}}
              </li>
              {% endfor %}
            </ul>
          </div>          
          {% endcomment %}
      <div class="product-loop-variants">
      <select class="productOption dropdown-selected" name="option-{{optionIndex}}"> 
        {%- for value in option.values -%}
        <option value="{{value}}" {% if option.selected_value == value %}checked{% endif %}>
          {{value}}
        </option>
        {% endfor %}
      </select>
      </div>
          {% endif %}
        </div>
        {% endfor %}
        {% endif %}
        <select name="id" id="ProductSelect" class="product-form__variants no-js hide js">
          {% for variant in product.variants %}
          {% if variant.available %}
          <option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %} value="{{ variant.id }}">
            {{ variant.title }}
          </option>
          {% else %}
          <option disabled="disabled">{{ variant.title }} - {{ 'products.product.sold_out' | t }}</option>
          {% endif %}
          {% endfor %}
        </select>

        <div class="productErrors error_message" style="display:none"></div>
            {% assign preorder = false %}
            {% if settings.enable_preorder and current_variant.inventory_policy == 'continue' and current_variant.inventory_quantity <= 0  %}
            {% assign preorder = true %}
            {% endif %}
        <div class="product_button product-featured-form-submit {% if section.settings.enable_payment_button %} product-form--payment-button{% endif %} {% unless current_variant.available %}disabled{% endunless %}" data-button-wrapper>
          <div class="pdp-action-container">
          <div class="pdp-add-to-bag ">
            <button
                    type="submit"
                    name="add"
                    data-add-to-cart id="Sd_addProduct"
                    {% unless current_variant.available %}disabled="disabled"{% endunless %}
                    {% if section_onboarding %}disabled="disabled"{% endif %} class="Sd_addProduct black-btn button btn-block">
              <span>
                {% if product.available %}
                      {% if preorder %}
                      {{ 'products.product.preorder' | t }}
                      {% else %}
                      {{ 'products.product.add_to_cart' | t }}
                      {% endif %}
                {% else %}
                {{ 'products.product.sold_out' | t }}
                {% endif %}
              </span>
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                   style="margin: auto; display: none; shape-rendering: auto;" 
                   width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="svg-loader" >
                <circle cx="50" cy="50" fill="none" stroke="#ffffff" stroke-width="6" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">
                  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"/>
                </circle>
              </svg>
            </button>
          </div>
          {{ form | payment_button }}
          </div>
        </div>
        <a href="{{product.url}}" class="link">{{'general.view_detail' | t}}</a>
      </div>
      {% endform %}

      <div class="social-icons">
        {% include 'social-sharing', hidetext:true, share_title: product.title, share_permalink: product.url, share_image: product %}
      </div>
    </div>


            {% render 'product-variants' product:product %}
  </div>
</div>
<style>
  
      .quickview_product{
    visibility: hidden;
/*         display: flex; */
}
.quickview_product.slick-initialized {
    visibility: visible;
  transition: visibility 1.5s ease;
}
  .quickview_product .slick-slide{
  	display:block !important;
  }
</style>
<script>
  $(document).ready(function(){

    $('#feature__product-{{product.id}}').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: true,
      fade: true,
      prevArrow:"<button type=\"button\" class=\"slick-prev\" aria-label=\"Prev\"><span><svg aria-hidden=\"true\" focusable=\"false\" viewBox=\"0 0 24 24\" role=\"img\" width=\"24px\" height=\"24px\" fill=\"none\"><path stroke=\"currentColor\" stroke-width=\"1.5\" d=\"M15.526 18.966L8.559 12l6.967-6.967\"></path></svg></span></button>",
      nextArrow:"<button type=\"button\" class=\"slick-next\" aria-label=\"Next\"><span><svg aria-hidden=\"true\" focusable=\"false\" viewBox=\"0 0 24 24\" role=\"img\" width=\"24px\" height=\"24px\" fill=\"none\"><path stroke=\"currentColor\" stroke-width=\"1.5\" d=\"M8.474 18.966L15.44 12 8.474 5.033\"></path></svg></span></button>",                        
      asNavFor: '#feature__productThumbs-{{product.id}}',
      responsive:[
        {
        breakpoint: 768,
          settings: {
              dots:true,
              arrows:false,
              draggable:true
            }
          }
        ]
      });
    $('#feature__productThumbs-{{product.id}}').slick({
      slidesToShow: 6,
      slidesToScroll: 1,
      asNavFor:'#feature__product-{{product.id}}',
      dots: false,
      arrows: false,
      focusOnSelect: true
      });

  })
</script>