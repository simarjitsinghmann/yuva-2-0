validateQty=function(t){return(parseFloat(t)!=parseInt(t)||isNaN(t))&&(t=1),t},$(document).on("change ","[name=note]",function(t){var a=$(this).val();$.ajax({url:cartUpdateUrl,type:"POST",data:{note:a},dataType:"json",success:function(t){}})}),window.location.pathname.indexOf("/cart")>-1?(!function(){function shippingEstimates(){if(Shopify&&Shopify.CountryProvinceSelector){if(!document.getElementById("shippingCountry"))return!1;new Shopify.CountryProvinceSelector("shippingCountry","shippingProvince",{hideElement:"shippingProvinceContainer"});setupEventListeners()}}function setupEventListeners(){var t=document.getElementById("getShippingEstimates");t&&t.addEventListener("click",()=>{$("#ShippingWrapperResponse").html("").attr("class","").hide();var t={};t.zip=jQuery("#shippingZip").val()||"",t.country=jQuery("#shippingCountry").val()||"",t.province=jQuery("#shippingProvince").val()||"",_getCartShippingRates(t)})}var _getCartShippingRates=function(t){var a={type:"POST",url:"/cart/prepare_shipping_rates",data:jQuery.param({shipping_address:t}),success:_CartShippingRates(t),error:_onError};jQuery.ajax(a)},_CartShippingRates=function(t){return function(){jQuery.ajax("/cart/async_shipping_rates",{dataType:"json",success:function(t,a,e){console.log(t),200===e.status&&_render(t.shipping_rates)},error:_onError})}},_fullMessagesFromErrors=function(t){var a=[];return jQuery.each(t,function(t,e){jQuery.each(e,function(e,n){a.push(t+" "+n)})}),a},_onError=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");feedback="Error : "+_fullMessagesFromErrors(data).join("; ")+".",$("#ShippingWrapperResponse").html('<span class="error-text">'+feedback+"</span>").addClass("error").show()},_render=function(t){if(t){var a="";t.forEach(function(t){a+=`<span class="success-text">${t.name}:${Shopify.formatMoney(100*t.price,moneyFormat)}</span>`}),$("#ShippingWrapperResponse").html(a).addClass("success").show()}};setTimeout(function(){shippingEstimates()},500)}(),changeCartItem=function(t,a){var e={type:"POST",url:cartChangeUrl,data:"quantity="+a+"&line="+t,dataType:"json",success:function(e){jQuery.getJSON(cartUrl,function(e,n){if(0==a&&$('[name="item_quantity"][data-line="'+t+'"]').closest("tr").remove(),0==e.item_count)$("#cart[cart-form]").hide(),$("[cart-empty]").show(),$("[data-cart-count]").hide();else{$("[data-cart-count]").show();var r=e.items[t-1];r&&$('[name="item_quantity"][data-line="'+t+'"]').val(r.quantity),cartPageUpdate(e)}})},error:function(t,a){}};jQuery.ajax(e)},$(document).on("click",".line_item_change",function(t){t.preventDefault();var a=$(this),e=a.data("line"),n=a.closest("tr"),r=a.siblings('input[name="item_quantity"]'),i=parseInt(r.val().replace(/\D/g,""));n.addClass("disabled");i=validateQty(i);a.hasClass("plus")?i+=1:(i-=1)<=0&&(i=0),r.val(i),e&&changeCartItem(e,i)}),$(document).on("change",'[name="item_quantity"]',function(t){t.preventDefault();var a=$(this),e=a.data("line"),n=a.closest("tr"),r=parseInt(a.val().replace(/\D/g,""));n.addClass("disabled");r=validateQty(r);e&&changeCartItem(e,r)}),$(document).on("click",".line_item_remove",function(t){t.preventDefault();var a=$(this),e=a.closest("tr"),n=a.data("line");n&&(e.addClass("disabled"),changeCartItem(n,0))}),cartPageUpdate=function(t){$.ajax({url:mainCartUrl,type:"GET",dataType:"html",success:function(a){if($("body").find("[data-cart-items]").html($(a).find("[data-cart-items]").html()),0==t.item_count&&$("[data-cart-count").hide(),$("[data-cart-item-count]").text(t.item_count),$("[data-cart-original-price]").text(Shopify.formatMoney(t.original_total_price,moneyFormat)),$("[data-cart-total-price]").text(Shopify.formatMoney(t.total_price,moneyFormat)),t.cart_level_discount_applications.length>0){var e="";$.each(t.cart_level_discount_applications,function(t,a){e+="<li data-cart-discount>Discount["+a.title+"] <strong>-"+Shopify.formatMoney(a.total_allocated_amount,moneyFormat)+"</strong></li>"}),$("li[data-cart-discount]").remove(),$("li[data-cart-original]").removeClass("hidden"),$(e).insertAfter("li[data-cart-original]")}else $("li[data-cart-original]").addClass("hidden"),$("li[data-cart-discount]").remove()}})}):(changeItem=function(t,a,e){$(document.body);var n={type:"POST",url:cartChangeUrl,data:"quantity="+a+"&line="+t,dataType:"json",success:function(t){jQuery.getJSON(cartUrl,function(t,a){e(t)})},error:function(t,a){console.log(t,a)}};jQuery.ajax(n)},updateQuantity=function(t,a,e){isUpdating=!0,setTimeout(function(){changeItem(t,a,e)},250)},buildCart=function(t,a){0===t.item_count?$("[data-cart-count]").hide():$("[data-cart-count]").show(),$("[data-drawer-body]").load(mainCartUrl+"?view=jsonData",function(){a&&($("body").addClass("side_Drawer_open"),$(".wrapper-overlay").css({display:"block"}))})},$('[action="'+cartAdd+'"]').on("submit",function(t){t.preventDefault(),$("body").find(".productErrors").hide().html("");var a=$(this).find('[type="submit"]');a.addClass("is-loading"),params={type:"POST",url:cartAddUrl,data:jQuery(this).serialize(),dataType:"json",success:function(t){$("body").removeClass("quickview-open"),$("[data-drawer-body]").html(preLoadLoadGif),$("body").find("[data-side-drawer]").attr("class","side_drawer_wrapper"),$("body").find("[data-drawer-title]").html(cartTitleLabel),$("body").find("[data-side-drawer]").attr("id","mini__cart").addClass("mini_cart"),$("body").addClass("side_Drawer_open"),jQuery.getJSON(cartUrl,function(t,e){buildCart(t,!0),setTimeout(function(){a.removeClass("is-loading")},1e3)})},error:function(t,e){"function"==typeof errorCallback?errorCallback(t,e):(console.log(t),console.log(t.responseJSON.description),$("body").find(".productErrors").html(t.responseJSON.description).show()),setTimeout(function(){a.removeClass("is-loading")},1e3)}},jQuery.ajax(params)}),$(document).on("click",".quantity-button",function(t){t.preventDefault();var a=$(this),e=a.closest(".media-link"),n=a.data("line"),r=a.closest(".quantity").find(".ajaxcart__qty-num"),i=r.val();e.addClass("disabled"),i&&(i=parseInt(i.replace(/\D/g,"")));i=validateQty(i);a.hasClass("ajaxcart__qty--plus")?i+=1:(i-=1)<=0&&(i=0),r.val(i),n&&updateQuantity(n,i,buildCart)}),$(document).on("change",".ajaxcart__qty-num",function(t){t.preventDefault();var a=$(this),e=a.closest(".media-link"),n=a.data("line"),r=parseInt(a.val().replace(/\D/g,""));e.addClass("disabled");r=validateQty(r);n&&updateQuantity(n,r,buildCart)}),$("body").on("click",".openCartDrawer",function(t){t.preventDefault(),$("[data-drawer-body]").html(preLoadLoadGif),$("body").find("[data-drawer-title]").html(cartTitleLabel),$("body").find("[data-side-drawer]").attr("class","side_drawer_wrapper"),$("body").find("[data-side-drawer]").attr("id","mini__cart").addClass("mini_cart"),$("body").addClass("side_Drawer_open"),jQuery.getJSON(cartUrl,function(t,a){buildCart(t,!0)})}),$(document).on("click",".sd_mini_removeproduct",function(t){t.preventDefault();var a=$(this),e=a.closest(".media-link"),n=a.attr("line");e.addClass("disabled"),n&&updateQuantity(n,0,buildCart)}),$(document).on("click ",".cartDrawerNote",function(t){$(this).toggleClass("active"),$(this).siblings(".cartNoteContainer").slideToggle()}));