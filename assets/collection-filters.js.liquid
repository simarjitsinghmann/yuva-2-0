(function () {
  
  var filterForm=document.getElementById('CollectionFiltersForm');
  var sectionId = document.getElementById('CollectionProductsContainer').dataset.id;
  function collectionFilters(){    
    var inputs = filterForm.querySelectorAll('input[type=checkbox]');
    Array.from(inputs).forEach(function(input) {
      input.addEventListener("click", ()=>{	
                             getFilterData(input)
      });
    });  
  var prices = filterForm.querySelectorAll('input[type=number]');
    Array.from(prices).forEach(function(input) {
      input.addEventListener("change", ()=>{	
                             getFilterData(input)
      });
    });   
	}
    
  var sortBy = filterForm.querySelectorAll('select');
    Array.from(sortBy).forEach(function(input) {
      input.addEventListener("change", ()=>{	
                             getFilterData(input)
      });
    });   
	}
   function getFilterData(input){    	
      const formData = new FormData(filterForm);
      var searchParameters = new URLSearchParams(formData).toString();
      var _url = window.location.pathname+'?'+searchParameters;
      window.location.href = _url
      console.log(filterForm,sectionId,searchParameters,window.location.pathname)
    }
  collectionFilters();
}());