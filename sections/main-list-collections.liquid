
{% assign limit = section.settings.collections_per_page %}
{% if section.settings.show_collections == 'selected' %}
{% assign limit = 100 %}
{% endif %}
{% paginate collections by limit %}
<div class="main-collection-category-section">
<div class="container">
  <div class="shopify__top__section section-heading-box">
    <h2>{{ section.settings.title | escape }}</h2>
  </div>
  {%- liquid
    case section.settings.sort
      when 'products_high' or 'products_low'
        assign collections = collections | sort: 'all_products_count'
      when 'date' or 'date_reversed'
        assign collections = collections | sort: 'published_at'
    endcase

    if section.settings.sort == 'products_high' or section.settings.sort == 'date_reversed' or section.settings.sort == 'alphabetical_reversed'
      assign collections = collections | reverse
    endif
  -%}

  <ul class="collection-list grid grid--1-col grid--3-col-tablet" role="list">
    {% if section.settings.show_collections == 'all' %}
    {% if collections.size > 0 %}
    {%- for collection in collections -%}
    {% include 'collection-grid' collection:collection %}
    {%- endfor -%}
    {% else %}
    {% render 'not-found'  item:'Collection'%}
    {% endif %}
    {% else %}
    {% if section.blocks.size > 0 %}
    {% for block in section.blocks %}
    {% if block.settings.collection != blank %}
    {% include 'collection-grid' collection:block.settings.collection,collectionImage:block.settings.image %}
    {% endif %}
    {% endfor %}
    {% else %}
    {% render 'not-found'  item:'Collection'%}
    {% endif %}
    {% endif %}
  </ul>
</div>

  {% if paginate.pages > 1 %}
  {% include 'pagination' %}
  {% endif %}
</div>
{% endpaginate %}
{% schema %}
{
  "name": "t:sections.main-list-collections.name",
  "class": "collection_list_outer",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "t:sections.main-list-collections.settings.title.label",
      "default": "Collections"
    },
    {
      "type": "range",
      "id": "collections_per_page",
      "min": 3,
      "max": 15,
      "step": 1,
      "default": 9,
      "label": "t:sections.main-list-collections.settings.collections_per_page.label"
    },
    {
      "type": "radio",
      "id": "show_collections",
      "default": "all",
      "label": "t:sections.main-list-collections.settings.show_collections.label",
      "options": [
        {
          "value": "all",
          "label": "t:sections.main-list-collections.settings.show_collections.all.label"
        },
        {
          "value": "selected",
          "label": "t:sections.main-list-collections.settings.show_collections.selected.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "sort",
      "options": [
        {
          "value": "alphabetical",
          "label": "t:sections.main-list-collections.settings.sort.options__1.label"
        },
        {
          "value": "alphabetical_reversed",
          "label": "t:sections.main-list-collections.settings.sort.options__2.label"
        },
        {
          "value": "date_reversed",
          "label": "t:sections.main-list-collections.settings.sort.options__3.label"
        },
        {
          "value": "date",
          "label": "t:sections.main-list-collections.settings.sort.options__4.label"
        },
        {
          "value": "products_high",
          "label": "t:sections.main-list-collections.settings.sort.options__5.label"
        },
        {
          "value": "products_low",
          "label": "t:sections.main-list-collections.settings.sort.options__6.label"
        }
      ],
      "default": "alphabetical",
      "label": "t:sections.main-list-collections.settings.sort.label"
    }
  ],
    "blocks":[
      {
        "type":"collection",
         "name":"t:sections.main-list-collections.blocks.collection.name",
         "settings":[
              {
                "type":"collection",
                "id":"collection",
                "label": "t:sections.main-list-collections.blocks.collection.settings.collection.label"
              },
              {
                "type":"image_picker",
                "id":"image",
                "label": "t:sections.main-list-collections.blocks.collection.settings.image.label"
              }
           ]
       }
    ]
}
{% endschema %}
