{% if section.blocks.size > 0 %}
  <div class="container">
      <div class="faq-detail">
        <h3>{{section.settings.heading}}</h3>
        <div class="accordion-container">
          {% for block in section.blocks %}
          {% if block.settings.heading != blank or block.settings.answer != blank%}
          <div class="set">
            <h6 class="panel-title faq-{{section.id}}" content="faq-content-{{block.id}}">
              <a href="javascript:void(0)">
                {{block.settings.heading }}
                <span class="iconPlus">{% render 'icon-plus' %}</span>
                <span class="iconMinus">{% render 'icon-minus' %}</span>
              </a>
            </h6>
            <div class="content faqSection-content" id="faq-content-{{block.id}}" style="display:none;">
              <div class="panel-body">
                {{block.settings.answer}}
              </div>
            </div>
          </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>
  </div> 
{% endif %}

<style>
  #shopify-section-{{section.id}}{
    background-color:{{section.settings.bgcolor}};
  }
</style>
 <script>
      var tabHead = document.getElementsByClassName('faq-{{section.id}}');
      if(tabHead.length > 0 ){
         var tabContent =  document.getElementsByClassName('faqSection-content');
        
         Array.from(tabHead).forEach(function(btn) {
           btn.addEventListener("click", ()=>{
			let icon = btn.querySelectorAll('.fa')[0];
           if(btn.classList.contains('active')){
             clearActive();
           }
           else{
             clearActive();
             btn.classList.add("active");
             var _value = btn.getAttribute("content");
             document.getElementById(_value).style.display = "block";
           }
         });
         });
       function clearActive(){
         var tabs = document.getElementsByClassName('faq-{{section.id}}');
         var tabsContent =  document.getElementsByClassName('faqSection-content');
         Array.from(tabs).forEach(function(item) {
           item.classList.remove('active');
         });
         Array.from(tabsContent).forEach(function(item) {
           item.style.display = 'none';
         });
       }
      }
   </script>
{% schema %}
  {
    "name": "t:sections.faq-section.name",
	"tag":"section",
	"class":"faq faq-section",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "default": "Frequently Asked Questions",
        "label": "t:sections.faq-section.settings.heading.label"
      },
      {
        "type": "color",
        "id": "bgcolor",
        "label": "t:sections.faq-section.settings.bgcolor.label",
        "default":"#ffffff"
      }
    ],
	"blocks":[
		{
          "type": "faq",
          "name": "t:sections.faq-section.blocks.faq.name",
			"settings":[
				{
					"type":"text",
					"id":"heading",
          			"label": "t:sections.faq-section.blocks.faq.settings.heading.label"
				},
				{
					"type":"richtext",
					"id":"answer",
          			"label": "t:sections.faq-section.blocks.faq.settings.answer.label"
				}
			]
		}
	],
	"presets":[
		{
			"name":"t:sections.faq-section.presets.name"
		}
	]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
