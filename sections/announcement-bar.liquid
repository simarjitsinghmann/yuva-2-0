{% if section.settings.show_bar and section.blocks.size > 0 %}
    <div id="shopify-section-announcement-bar"> 
        {% for block in section.blocks %}
            <style>
                #announcement{{block.id}} {
                    border-color:transparent !important;
                    {% if block.settings.bg_style == 'solid' %}
                        background-color:{{block.settings.bgcolor}};
                    {% elsif block.settings.bg_style == 'gradient' %}
                        background: -moz-linear-gradient(left, {{block.settings.bgcolor}} 0%, {{block.settings.bgcolor}} 33%, {{block.settings.bgcolor2}} 66%, {{block.settings.bgcolor2}} 100%);
                        background: -webkit-linear-gradient(left, {{block.settings.bgcolor}} 0%,{{block.settings.bgcolor}} 33%,{{block.settings.bgcolor2}} 66%,{{block.settings.bgcolor2}} 100%);
                        background: linear-gradient(to right, {{block.settings.bgcolor}} 0%,{{block.settings.bgcolor}} 33%,{{block.settings.bgcolor2}} 66%,{{block.settings.bgcolor2}} 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='{{block.settings.bgcolor}}', endColorstr='{{block.settings.bgcolor2}}',GradientType=1 );
                    {% endif %}
                }
                #announcement{{block.id}} .announcement-bar__message{
                    color:{{block.settings.fontcolor}};
                }
                #announcement{{block.id}} .announcement-bar__message p a{
                    color: {{block.settings.fontcolor}};
                    border-bottom: 1px solid {{block.settings.fontcolor}};
                }
                #announcement{{block.id}} .announcement-bar__message a.announce-btn{
                    color:{{block.settings.btn_fontcolor}};
                    background-color:{{block.settings.btn_bgcolor}};
                    border: 1px solid transparent;
                    border-color:{{block.settings.bborder_color}};
                }
            </style>
        <div id="announcement{{block.id}}" class="announcement-bar">
            <div class="announcement-bar__message h5">
                {% unless block.settings.icon == 'none' %}
                <span class="announcement_icon">
                    {% render 'icon-list' icon:block.settings.icon %}
                </span>
                {%endunless%}
                {{block.settings.announcement}}
                {% if block.settings.btn != blank %}
                    <a class="announce-btn" href="{{block.settings.link}}">{{block.settings.btn}}</a>
                {% endif %}
                {% if section.settings.show_close %}
                <a href="javascript:void(0)" class="announce_close close">
                    <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 40 40"><path d="M23.868 20.015L39.117 4.78c1.11-1.108 1.11-2.77 0-3.877-1.109-1.108-2.773-1.108-3.882 0L19.986 16.137 4.737.904C3.628-.204 1.965-.204.856.904c-1.11 1.108-1.11 2.77 0 3.877l15.249 15.234L.855 35.248c-1.108 1.108-1.108 2.77 0 3.877.555.554 1.248.831 1.942.831s1.386-.277 1.94-.83l15.25-15.234 15.248 15.233c.555.554 1.248.831 1.941.831s1.387-.277 1.941-.83c1.11-1.109 1.11-2.77 0-3.878L23.868 20.015z" class="layer"></path></svg>
                 </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
{% endif %}

{% schema %}
{
    "name": "t:sections.announcement-bar.name",
    "settings": [
        {
            "type": "checkbox",
            "id": "show_bar",
            "default": true,
            "label": "t:sections.announcement-bar.settings.show_bar.label"
        },
        {
            "type": "checkbox",
            "id": "show_close",
            "default": true,
            "label": "t:sections.announcement-bar.settings.show_close.label"
        }
    ],
    "blocks": [
        {
            "type":"announcement",
            "name":"t:sections.announcement-bar.blocks.announcement.name",
            "settings": [
                {
                    "type": "richtext",
                    "id": "announcement",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.announcement.label"
                },
                {
                  "type": "select",
                  "id": "icon",
                  "label": "t:sections.announcement-bar.blocks.announcement.settings.icon.label",
                  "default": "none",
                  "options": [
                    {
                      "label": "t:sections.announcement-bar.blocks.announcement.settings.icon.none.label",
                      "value": "none"
                    },
                    {
                      "label": "t:sections.announcement-bar.blocks.announcement.settings.icon.horn.label",
                      "value": "horn"
                    },
                    {
                      "label": "t:sections.announcement-bar.blocks.announcement.settings.icon.gift.label",
                      "value": "gift"
                    }
                  ]
                },
                {
                  "type": "select",
                  "id": "bg_style",
                  "label": "t:sections.announcement-bar.blocks.announcement.settings.bg_style.label",
                  "default": "solid",
                  "options": [
                    {
                      "label": "t:sections.announcement-bar.blocks.announcement.settings.bg_style.solid.label",
                      "value": "solid"
                    },
                    {
                      "label": "t:sections.announcement-bar.blocks.announcement.settings.bg_style.gradient.label",
                      "value": "gradient"
                    }
                  ]
                },
                {
                    "type": "text",
                    "id": "btn",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.btn.label"
                },
                {
                    "type": "url",
                    "id": "link",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.link.label"
                },
                {
                    "type": "color",
                    "id": "bgcolor",
                    "default": "#f17e35",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.bgcolor.label"
                },
                {
                    "type": "color",
                    "id": "bgcolor2",
                    "default": "#f86f64",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.bgcolor2.label",
                    "info": "t:sections.announcement-bar.blocks.announcement.settings.bgcolor2.info"
                },
                {
                    "type": "color",
                    "id": "fontcolor",
                    "default": "#ffffff",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.fontcolor.label"
                },
                {
                    "type": "color",
                    "id": "btn_bgcolor",
                    "default": "#f17e35",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.btn_bgcolor.label"
                },
                {
                    "type": "color",
                    "id": "btn_fontcolor",
                    "default": "#ffffff",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.btn_fontcolor.label"
                },
                {
                    "type": "color",
                    "id": "bborder_color",
                    "label": "t:sections.announcement-bar.blocks.announcement.settings.bborder_color.label"
                }
            ]
        }
    ]
}
{% endschema %}
