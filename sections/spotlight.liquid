<div class="spotlightSectionMain">
  <div class="spotlighSectionWrapper">
      {%- if section.settings.image != blank -%}
     <div class="image-wrapper" style="padding-bottom:{{ 1 | divided_by : section.settings.image.aspect_ratio | times: 100 | minus : 1 }}%">
         {%- render 'lazy-image' image:section.settings.image,class:'spotlightSectionImage' -%}
    </div>
      {%-else-%}
      <div class="spotlightSectionPlaceholder">{% render 'banner-placeholder'%}</div>
      {%- endif %}
    {% for block in section.blocks %}
    <div class="spotlightPoint" style="top:{{block.settings.vertical}}%;left:{{block.settings.horizontal}}%">
      {% if block.settings.product != blank %}
      <div class="spotlightProductDetails {% if block.settings.vertical > 50 %}spotlightProductDetails-top{% endif %} {% if block.settings.horizontal > 70 %}spotlightProductDetails-left{% elsif block.settings.horizontal < 30%}spotlightProductDetails-right{% endif %}">
        {%- assign product = block.settings.product -%}
        <a href="{{product.url}}">
          <h6>{{product.title}}</h6>
          {{product.featured_image | img_url:'350x'| img_tag}}
          <p>{{product.price | money}}</p>
        </a>
        
        {%- assign product_form_id = 'product-form-' | append: section.id | append : product.id-%}
        {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
        <input type="hidden" name="id" value="{{product.selected_or_first_available_variant.id}}">
        <input type="hidden" name="quantity" value="1">
        <button type="submit" class="btn" >Add to Cart</button>
        {% endform %}
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</div>
<style>
  .spotlighSectionWrapper {
    width: 60%;
    height: auto;
    position: relative;
}
img.spotlightSectionImage {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
}
  .image-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
}
/*   .spotlighSectionWrapper {
    width: 100%;
    height: 600px;
    position: relative;
} */
  .spotlightPoint{
  	position:absolute;
    width:10px;
    height:10px;  
    cursor:pointer;
  }
  
  .spotlightPoint:before{
    content: '';
    width: 20px;
    height: 20px;
    border-radius: 50px;
    background: #000;
    position: absolute;
  }
  .spotlightProductDetails{
    display: none;
    width: fit-content;
    position: absolute;
    margin-top: calc(100% + 1em);
    background: #FFF;
    padding: 1.5em;
    border-radius: 5%;
  }
  .spotlightPoint:hover .spotlightProductDetails{
  	display:block;
  }
  </style>
{% schema %}
  {
    "name": "Spotlight",
    "class": "spotlight-section",
    "settings": [
		{
			"type":"image_picker",
			"label":"Image",
			"id":"image"
		}
	],
    "blocks": [
		{
          "type": "spot",
          "name": "Spot",
          "settings": [
              {
                  "type":"product",
                  "label":"product",
                  "id":"product"
              },
              {
                  "type":"range",
                  "label":"Horizontal position",
                  "id":"horizontal",
                  "min":1,
                  "max":100,
                  "step":1,
                  "unit":"%",
                  "default":1
              },
              {
                  "type":"range",
                  "label":"Vertical position",
                  "id":"vertical",
                  "min":1,
                  "max":100,
                  "step":1,
                  "unit":"%",
                  "default":1
              }
          ]
		}
	],
	"presets":[
		{
			"name":"Spotlight"
		}
	]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
