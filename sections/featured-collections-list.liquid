{{'section-featured-collections-list.css' | asset_url | stylesheet_tag }}
<div id="section-{{section.id}}" class="colllection-list-view">
  <div class="container">
    <div class="collection-section-header section-heading-box">                  
      {% if section.settings.heading != blank %}
      <h2 class="title">{{section.settings.heading}}</h2>
      {% endif %}
      {% if section.settings.btntext != blank %}
      <a class="view-all" href="{{section.settings.btnlink}}">{{section.settings.btntext}}</a>
      {% endif %}
    </div>
    {% assign colWidth = 'col-md-4' %}
    {% if section.settings.view_limit == 2 %}
    {% assign colWidth = 'col-md-6' %}
    {% elsif section.settings.view_limit == 4 %}
    {% assign colWidth = 'col-md-3' %}
    {% endif %}
    <div class=" owl-carousel owl-theme" id="collectionSlider-{{section.id}}">
      {% for block in section.blocks %}
      {% if block.settings.collection != blank %}
      {% assign collection = block.settings.collection %}
      <div class="collection-list-view-card" id="block-{{block.id}}"  {{ block.shopify_attributes }}>
        {% if block.settings.image != blank %}
        <img src="{{ block.settings.image | img_url:'500x500'}}" />
        {% else %}
        <img src="{{ collection.featured_image | img_url:'500x500'}}" />
        {% endif %}

        <div class="list-view-content">          
          {% if block.settings.heading != blank %}
          <h2>{{block.settings.heading}}</h2>
          {% else %}
          <h2>{{collection.title}}</h2>
          {% endif %}
          <a href="{{collection.url}}" class="link">{{block.settings.btntext}}</a>
        </div>
        <style>
          #block-{{block.id}} .list-view-content{
            background:{{block.settings.overlay_color | color_modify: 'alpha', block.settings.overlay_opacity}};
          }
        </style>
      </div>
      {% endif %}
      {% endfor%}
    </div>
  </div>
</div>
<style>
  
          #section-{{section.id}} .collection-list-view-card h2{
            font-size:{{section.settings.heading_font }}px;
          }
</style>
<script>
jQuery(document).ready(function() {
  var previcon='<svg width="100%" viewBox="0 0 24 24"> <path d="M12 0 9.87 2.11l8.35 8.36H0v3h18.22l-8.35 8.36L12 23.94 24 12z" focusable="false"></path> </svg>';
      var nexticon='<svg width="100%" viewBox="0 0 24 24"> <path d="M12 0 9.87 2.11l8.35 8.36H0v3h18.22l-8.35 8.36L12 23.94 24 12z" focusable="false"></path> </svg>';
  var slider = jQuery('#collectionSlider-{{section.id}}');
	var options = {
	 center: false,
	 items: 2,
	 loop: true,
	 margin: 0,
	 dots:false,
	 autoplay:false,
	 nav:true,
	 slideSpeed: 1000,
	 autoHeight: false,
	 autoHeightClass: 'owl-height',
	 autoPlaySpeed: {{section.settings.rotate_speed | times:1000}},
     navText: [previcon,nexticon],
  }
                      
 slider.owlCarousel(options);
  slider.on('changed.owl.carousel', function(event) {
//     alert("asdasdas");
    slider.owlCarousel(options);
  });
});
</script>
{% schema %}
{
  "name": "t:sections.featured-collections-list.name",
  "tag": "section",
  "class":"collection-list-section",
	"max_blocks":8,
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "Collection list",
      "label": "t:sections.featured-collections-list.settings.heading.label"
    },
    {
      "type": "text",
      "id": "btntext",
      "default": "View All",
      "label": "t:sections.featured-collections-list.settings.btntext.label"
    },
    {
      "type": "url",
      "id": "btnlink",
      "label": "t:sections.featured-collections-list.settings.btnlink.label"
    },
        {
          "type": "range",
          "id": "view_limit",
          "default": 3,
          "label": "t:sections.featured-collections-list.settings.view_limit.label",
          "min": 2,
          "max": 4,
          "step": 1
        },
        {
          "type": "range",
          "id": "heading_font",
          "default": 25,
          "label": "t:sections.featured-collections-list.settings.heading_font.label",
          "min": 20,
          "max": 38,
          "step": 1,
          "unit": "px"
        }
  ],
  "blocks": [
	  {
      "type":"collection",
      "name":"t:sections.featured-collections-list.blocks.collection.name",
      "settings": [        
        {
          "type": "collection",
          "id": "collection",
          "label": "t:sections.featured-collections-list.blocks.collection.settings.collection.label"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.featured-collections-list.blocks.collection.settings.image.label"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.featured-collections-list.blocks.collection.settings.heading.label"
        },
        {
          "type": "text",
          "id": "btntext",
          "default": "Shop Now",
          "label": "t:sections.featured-collections-list.blocks.collection.settings.btntext.label"
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "label": "t:sections.featured-collections-list.blocks.collection.settings.overlay_color.label",
          "default": 0.5,
          "min": 0,
          "max": 1,
          "step": 0.1
        },
        {
          "type": "color",
          "id": "overlay_color",
          "label": "t:sections.featured-collections-list.blocks.collection.settings.overlay_color.label",
          "default":"#000000"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.featured-collections-list.presets.name",
      "blocks": [
        {
          "type": "collection"
        },
        {
          "type": "collection"
        },
        {
          "type": "collection"
        }
      ]
    }
  ]
}
{% endschema %}