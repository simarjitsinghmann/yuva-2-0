{% if section.settings.height != 'use_image' %}
  <style>
    @media only screen and (max-width: 480px){
      [data-section-id="{{ section.id }}"] video{
        width: auto !important;
        height: 100% !important;
      }
    }
  </style>
  {% endif %}
  
<div class="section--image fade-in-child {% unless section.settings.full_width %}container{% endunless %} preventOverflow video-sec {{ section.settings.height }} {{ section.settings.color }}" data-section-id="{{ section.id }}" data-section-type="hero" data-overlay-header>
  <div class="video-inner-box">
    <video id="videoFile" {% if section.settings.autoplay %}autoplay muted{% endif %} loop playsinline width="100%" height="600px" {% if section.settings.poster !=blank %}poster="{{section.settings.poster | img_url:'master'}}"{% endif %}>
      <source src="{{ section.settings.videofile }}" type="video/mp4" id="{{ section.id }}">
    </video> 
    <div class="videoOverlay"></div>
    <div class="container">
      {% unless section.settings.link_text == blank and section.settings.title == blank and section.settings.description == blank %}
      {% if section.settings.link_text == '' and section.settings.link  %}
      <a href="{{ section.settings.link }}">
        {% endif %}

        <div class="flex-absolute {{ section.settings.text_position }} {{ section.settings.text_align }}">
          <div class="wrapper preventOverflowContent">
            {% unless section.settings.videofile == '' %}
            <button class="cta--overlay" id="playVideo">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="300px" width="300px" fill="#000000" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M50,5C25.2,5,5,25.2,5,50s20.2,45,45,45s45-20.2,45-45S74.8,5,50,5z M50,90c-22.1,0-40-17.9-40-40s17.9-40,40-40  s40,17.9,40,40S72.1,90,50,90z"/><path d="M72.5,47.8L40.6,29.4c-0.8-0.4-1.7-0.4-2.5,0c-0.8,0.4-1.3,1.3-1.3,2.2v36.8c0,0.9,0.5,1.7,1.3,2.2c0.4,0.2,0.8,0.3,1.3,0.3  s0.9-0.1,1.3-0.3l31.9-18.4c0.8-0.4,1.3-1.3,1.3-2.2S73.3,48.3,72.5,47.8z M41.9,64.1V35.9L66.3,50L41.9,64.1z"/></svg>
            </button>
            {% endunless %}
            {% unless section.settings.title == '' %}
            <h1 class="title--overlay h2">{{ section.settings.title | escape }}</h1>
            {% endunless %}
            {% unless section.settings.description == '' %}
            <p class="content--overlay h5--body">{{ section.settings.description }}</p>
            {% endunless %}
          </div>
        </div>

        {% if section.settings.link_text == '' and section.settings.link %}
      </a>
      {% endif %}
      {% endunless %}
    </div>
  </div>
</div>
<style>
  {% if section.settings.overlay %}
  .video-sec .videoOverlay {
    position: absolute;
    top: 0; 
    left: 0;
    right: 0;
    bottom: 0;
    height: 100%;
    background: {{section.settings.bgcolor}};
    opacity:{{section.settings.opacity}}%;
  }
  {% endif %}
  .home-video-sec .flex-absolute .btn--large{
    min-width: 145px;
    padding: 16px 28px 12px;
    display:inline-block;
    margin-top: 25px;
  }
</style>
<script>
  var section = document.getElementById("shopify-section-{{section.id}}");
  var button = section.querySelector("#playVideo");
  var video = section.querySelector("#videoFile");
  button.addEventListener("click", ()=>{	   
                          if(button.classList.contains('play-video')){
    console.log('test') 
  video.play();
    button.classList.remove('play-video');
    button.classList.add('stop-video');
  }
  else{  	
  video.pause();
    button.classList.remove('stop-video');
    button.classList.add('play-video');
  }
                           });
</script>
    {% schema %}
    {
      "name": "t:sections.video-banner.name",
      "class": "video-banner-section",
      "settings": [
        {
          "type": "text",
          "id": "videofile",
          "label": "t:sections.video-banner.settings.videofile.label",
          "default": "https://cdn.shopify.com/s/files/1/2018/8867/files/ice.mp4"
        },
        {
          "type": "image_picker",
          "id": "poster",
          "label": "t:sections.video-banner.settings.poster.label"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.video-banner.settings.title.label",
          "default": "Video with text overlay"
        },
        {
          "type": "checkbox",
          "id": "full_width",
          "label": "t:sections.video-banner.settings.full_width.label",
          "default": true   
        },
        {
          "type": "checkbox",
          "id": "autoplay",
          "label": "t:sections.video-banner.settings.autoplay.label",
          "default": true   
        },
        {
          "type": "checkbox",
          "id": "overlay",
          "label": "t:sections.video-banner.settings.overlay.label",
          "default": true   
        },
        {
          "type": "color",
          "id": "bgcolor",
          "label": "t:sections.video-banner.settings.bgcolor.label",
          "default": "#707070" 
        },
        {
          "type": "range",
          "id": "opacity",
          "label": "t:sections.video-banner.settings.opacity.label",
          "default": 40,
          "min":0,
          "max":100,
          "step":1,
          "unit":"%"          
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "t:sections.video-banner.settings.link_text.label",
          "default": "View products"
        }
      ],
      "presets": [
        {
          "name": "Video with text overlay"
    }
      ]
    }
    {% endschema %}
    
    
    {% stylesheet %}
    {% endstylesheet %}